/* Fixes spécifiques pour mobile - OmniFit Focus Mode */

/* Prevent iOS zoom on input focus */
@media (max-width: 768px) {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* Safe area pour les iPhones avec encoche */
.safe-top {
  padding-top: env(safe-area-inset-top);
}

.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Améliorer le scroll sur mobile */
.modal-content {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Éviter que le contenu soit caché derrière le clavier */
@supports (height: 100dvh) {
  .modal-container {
    min-height: 100dvh;
    min-height: 100dvh;
  }
}

/* Focus Mode - Optimisations mobile spécifiques */
@media (max-width: 768px) {
  /* Désactiver highlight sur tap pour performance */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Désactiver backdrop-filter sur mobile pour performance */
  .modal-backdrop {
    backdrop-filter: none;
    background-color: rgba(0, 0, 0, 0.95);
  }

  /* Optimiser les animations sur mobile */
  .btn-primary,
  .btn-secondary {
    transform: none !important;
    transition: background-color 0.2s ease;
  }

  /* Empêcher le zoom accidentel sur les boutons */
  button {
    touch-action: manipulation;
  }

  /* Optimiser les gradients sur mobile */
  .bg-gradient-to-r {
    background-attachment: fixed;
  }
}

/* Optimisations spécifiques iPhone */
@supports (-webkit-touch-callout: none) {
  /* Fix pour le timer circulaire sur iOS */
  .timer-circle svg {
    will-change: transform;
    transform: translateZ(0);
  }

  /* Améliorer les performances des animations sur iOS */
  .animate-spin {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* Focus Mode - Navigation bottom avec safe area */
.nav-bottom-focus {
  padding-bottom: max(8px, env(safe-area-inset-bottom));
  background-color: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
}

/* Optimisation du rendu pour le mode Focus */
.focus-mode {
  contain: layout style paint;
  transform: translateZ(0);
}

/* Améliorer la lisibilité du timer sur petits écrans */
@media (max-width: 400px) {
  .timer-display {
    font-size: 1.5rem;
  }

  .timer-circle {
    width: 180px;
    height: 180px;
  }
}
