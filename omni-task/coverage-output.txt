‚ñ≤ [WARNING] Duplicate key "docs:validate" in object literal [duplicate-object-key]

    ../../../package.json:168:4:
      168 ‚îÇ     "docs:validate": "echo 'üìù Validation structure documentati...
          ‚ïµ     ~~~~~~~~~~~~~~~

  The original key "docs:validate" is here:

    ../../../package.json:67:4:
      67 ‚îÇ     "docs:validate": "node shared/scripts/maintenance/validate-doc...
         ‚ïµ     ~~~~~~~~~~~~~~~

‚ñ≤ [WARNING] Duplicate key "docs:build" in object literal [duplicate-object-key]

    ../../../package.json:169:4:
      169 ‚îÇ     "docs:build": "echo 'üèóÔ∏è G√©n√©ration site documentation....
          ‚ïµ     ~~~~~~~~~~~~

  The original key "docs:build" is here:

    ../../../package.json:62:4:
      62 ‚îÇ     "docs:build": "vitepress build docs",
         ‚ïµ     ~~~~~~~~~~~~


 RUN  v3.2.4 /home/greg/projets/dev/apps/omni-task
      Coverage enabled with v8

 ‚ùØ |omni-task| components/ui/__tests__/modal.test.tsx (14 tests | 1 failed) 430ms
   ‚úì Modal > Affichage > ne devrait rien afficher si isOpen est false 32ms
   ‚úì Modal > Affichage > devrait afficher le modal si isOpen est true 58ms
   ‚úì Modal > Affichage > devrait appliquer les classes CSS personnalis√©es 15ms
   ‚úì Modal > Interactions > devrait appeler onClose en cliquant sur le bouton fermer 156ms
   ‚úì Modal > Interactions > devrait appeler onClose en cliquant sur le backdrop 33ms
   ‚úì Modal > Interactions > devrait appeler onClose en appuyant sur Escape 18ms
   ‚úì Modal > Interactions > ne devrait pas √©couter Escape si le modal est ferm√© 10ms
   ‚úì Modal > Gestion du scroll > devrait bloquer le scroll du body quand ouvert 10ms
   ‚úì Modal > Gestion du scroll > devrait restaurer le scroll du body quand ferm√© 11ms
   ‚úì Modal > Gestion du scroll > devrait nettoyer les event listeners au d√©montage 15ms
   ‚úì Modal > Structure > devrait avoir la structure correcte 22ms
   ‚úì Modal > Structure > devrait avoir les bonnes classes pour le conteneur principal 8ms
   ‚úì useModalContainer > devrait retourner null quand utilis√© en dehors du contexte 6ms
   √ó useModalContainer > devrait retourner la r√©f√©rence du modal quand utilis√© dans le contexte 29ms
     ‚Üí [2mexpect([22m[31melement[39m[2m).toHaveTextContent()[22m

Expected element to have text content:
[32m  Has container[39m
Received:
[31m  No container[39m
 ‚ùØ |omni-task| lib/store/__tests__/toast-store.test.ts (16 tests | 2 failed) 114ms
   ‚úì useToastStore > √âtat initial > devrait avoir un √©tat initial vide 11ms
   ‚úì useToastStore > addToast > devrait ajouter un toast avec un ID unique 13ms
   ‚úì useToastStore > addToast > devrait supprimer automatiquement le toast apr√®s la dur√©e sp√©cifi√©e 6ms
   ‚úì useToastStore > addToast > devrait utiliser une dur√©e par d√©faut de 3 secondes 8ms
   √ó useToastStore > removeToast > devrait supprimer un toast sp√©cifique 15ms
     ‚Üí expected [] to have a length of 2 but got +0
   ‚úì useToastStore > success > devrait ajouter un toast de succ√®s 6ms
   ‚úì useToastStore > success > devrait supprimer automatiquement apr√®s 3 secondes 5ms
   ‚úì useToastStore > error > devrait ajouter un toast d'erreur 5ms
   ‚úì useToastStore > error > devrait supprimer automatiquement apr√®s 5 secondes 5ms
   ‚úì useToastStore > info > devrait ajouter un toast d'info 5ms
   ‚úì useToastStore > info > devrait supprimer automatiquement apr√®s 3 secondes 6ms
   ‚úì useToastStore > warning > devrait ajouter un toast d'avertissement 6ms
   ‚úì useToastStore > warning > devrait supprimer automatiquement apr√®s 4 secondes 5ms
   ‚úì useToastStore > Gestion de plusieurs toasts > devrait g√©rer plusieurs toasts simultan√©ment 5ms
   √ó useToastStore > Gestion de plusieurs toasts > devrait supprimer les toasts dans le bon ordre 6ms
     ‚Üí expected [] to have a length of 2 but got +0
   ‚úì useToastStore > IDs uniques > devrait g√©n√©rer des IDs uniques m√™me pour des toasts cr√©√©s rapidement 6ms
 ‚ùØ |omni-task| app/api/tasks/__tests__/route.test.ts (6 tests | 4 failed) 58ms
   ‚úì Tasks API - Simplified > GET /api/tasks > devrait retourner 401 si non authentifi√© 24ms
   √ó Tasks API - Simplified > GET /api/tasks > devrait retourner les t√¢ches de l'utilisateur 11ms
     ‚Üí expected { data: [ { id: '1', ‚Ä¶(2) }, ‚Ä¶(1) ] } to deeply equal [ ‚Ä¶(2) ]
   √ó Tasks API - Simplified > POST /api/tasks > devrait cr√©er une nouvelle t√¢che 9ms
     ‚Üí expected { data: { title: 'New Task', ‚Ä¶(4) } } to match object { title: 'New Task', ‚Ä¶(2) }
(6 matching properties omitted from actual)
   ‚úì Tasks API - Simplified > POST /api/tasks > devrait retourner 401 si non authentifi√© 3ms
   √ó Tasks API - Simplified > PATCH /api/tasks > devrait retourner 401 si non authentifi√© 5ms
     ‚Üí Cannot destructure property 'params' of 'undefined' as it is undefined.
   √ó Tasks API - Simplified > DELETE /api/tasks > devrait retourner 401 si non authentifi√© 6ms
     ‚Üí Cannot destructure property 'params' of 'undefined' as it is undefined.
stderr | components/__tests__/task-form.test.tsx > TaskForm > Mode cr√©ation > devrait afficher le titre "Nouvelle t√¢che"
Warning: Invalid value for prop `data-onvaluechange` on <div> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior 
    at div
    at Select (/home/greg/projets/dev/apps/omni-task/components/__tests__/task-form.test.tsx:19:14)
    at div
    at div
    at form
    at div
    at Modal (/home/greg/projets/dev/apps/omni-task/components/__tests__/task-form.test.tsx:4:13)
    at TaskForm (/home/greg/projets/dev/apps/omni-task/components/task-form.tsx:11:21)

stdout | components/__tests__/task-form.test.tsx > TaskForm > Mode cr√©ation > devrait cr√©er une nouvelle t√¢che
Saving task: {
  title: [32m'Nouvelle t√¢che test'[39m,
  description: [32m'Description de test'[39m,
  status: [32m'TODO'[39m,
  priority: [32m'MEDIUM'[39m,
  projectId: [90mundefined[39m,
  dueDate: [32m'2024-12-25'[39m,
  estimatedHours: [33m4.5[39m,
  tags: [ [32m'test'[39m, [32m'vitest'[39m, [32m'react'[39m ]
}

stdout | components/__tests__/task-form.test.tsx > TaskForm > Mode cr√©ation > devrait utiliser le status par d√©faut fourni
Saving task: {
  title: [32m'Test'[39m,
  description: [90mundefined[39m,
  status: [32m'IN_PROGRESS'[39m,
  priority: [32m'MEDIUM'[39m,
  projectId: [90mundefined[39m,
  dueDate: [90mundefined[39m,
  estimatedHours: [90mundefined[39m,
  tags: [90mundefined[39m
}

stdout | components/__tests__/task-form.test.tsx > TaskForm > Mode cr√©ation > devrait g√©rer les erreurs de cr√©ation
Saving task: {
  title: [32m'Test'[39m,
  description: [90mundefined[39m,
  status: [32m'TODO'[39m,
  priority: [32m'MEDIUM'[39m,
  projectId: [90mundefined[39m,
  dueDate: [90mundefined[39m,
  estimatedHours: [90mundefined[39m,
  tags: [90mundefined[39m
}

stderr | components/__tests__/task-form.test.tsx > TaskForm > Mode cr√©ation > devrait g√©rer les erreurs de cr√©ation
Error saving task: Error: Erreur de cr√©ation
    at [90m/home/greg/projets/dev/apps/omni-task/[39mcomponents/__tests__/task-form.test.tsx:174:37
    at file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8)

stdout | components/__tests__/task-form.test.tsx > TaskForm > Mode √©dition > devrait mettre √† jour la t√¢che
Saving task: {
  title: [32m'T√¢che modifi√©e'[39m,
  description: [32m'Description existante'[39m,
  status: [32m'TODO'[39m,
  priority: [32m'HIGH'[39m,
  projectId: [32m'project1'[39m,
  dueDate: [32m'2024-12-31'[39m,
  estimatedHours: [33m8[39m,
  tags: [ [32m'bug'[39m, [32m'urgent'[39m ]
}

stdout | components/__tests__/task-form.test.tsx > TaskForm > Mode √©dition > devrait g√©rer les erreurs de mise √† jour
Saving task: {
  title: [32m'T√¢che existante'[39m,
  description: [32m'Description existante'[39m,
  status: [32m'TODO'[39m,
  priority: [32m'HIGH'[39m,
  projectId: [32m'project1'[39m,
  dueDate: [32m'2024-12-31'[39m,
  estimatedHours: [33m8[39m,
  tags: [ [32m'bug'[39m, [32m'urgent'[39m ]
}

stderr | components/__tests__/task-form.test.tsx > TaskForm > Mode √©dition > devrait g√©rer les erreurs de mise √† jour
Error saving task: Error: Erreur de mise √† jour
    at [90m/home/greg/projets/dev/apps/omni-task/[39mcomponents/__tests__/task-form.test.tsx:253:40
    at file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12)
    at runSuite (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///home/greg/projets/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8)

stdout | components/__tests__/task-form.test.tsx > TaskForm > Interactions communes > devrait g√©rer les tags correctement
Saving task: {
  title: [32m'Test'[39m,
  description: [90mundefined[39m,
  status: [32m'TODO'[39m,
  priority: [32m'MEDIUM'[39m,
  projectId: [90mundefined[39m,
  dueDate: [90mundefined[39m,
  estimatedHours: [90mundefined[39m,
  tags: [ [32m'tag1'[39m, [32m'tag2'[39m, [32m'tag3'[39m ]
}

 ‚úì |omni-task| components/__tests__/task-form.test.tsx (15 tests) 1952ms
   ‚úì TaskForm > Mode cr√©ation > devrait cr√©er une nouvelle t√¢che  769ms
stderr | app/(auth)/register/__tests__/page.test.tsx > RegisterPage > Inscription r√©ussie > devrait utiliser le fallback si la fonction RPC √©choue
Erreur lors de la configuration du profil: { message: [32m'RPC failed'[39m }

 ‚úì |omni-task| app/(auth)/register/__tests__/page.test.tsx (12 tests) 1980ms
   ‚úì RegisterPage > Inscription r√©ussie > devrait cr√©er un compte avec succ√®s  339ms
   ‚úì RegisterPage > Inscription r√©ussie > devrait utiliser le fallback si la fonction RPC √©choue  303ms
   ‚úì RegisterPage > Gestion des erreurs > devrait afficher une erreur si l'inscription √©choue  312ms
   ‚úì RegisterPage > Gestion des erreurs > devrait afficher un message d'erreur g√©n√©rique  330ms
   ‚úì RegisterPage > √âtat du formulaire > devrait d√©sactiver les champs pendant le chargement  323ms
 ‚úì |omni-task| app/(auth)/login/__tests__/page.test.tsx (11 tests) 1250ms
 ‚úì |omni-task| components/kanban/__tests__/task-card.test.tsx (14 tests) 221ms
 ‚úì |omni-task| components/kanban/__tests__/kanban-board.test.tsx (7 tests) 136ms
 ‚úì |omni-task| app/dashboard/__tests__/page.test.tsx (7 tests) 135ms
 ‚úì |omni-task| components/kanban/__tests__/kanban-column.test.tsx (8 tests) 101ms
 ‚úì |omni-task| lib/store/__tests__/task-store.test.ts (15 tests | 2 skipped) 82ms
 ‚úì |omni-task| components/__tests__/toast.test.tsx (9 tests) 83ms

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 7 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  |omni-task| components/ui/__tests__/modal.test.tsx > useModalContainer > devrait retourner la r√©f√©rence du modal quand utilis√© dans le contexte
Error: [2mexpect([22m[31melement[39m[2m).toHaveTextContent()[22m

Expected element to have text content:
[32m  Has container[39m
Received:
[31m  No container[39m
 ‚ùØ components/ui/__tests__/modal.test.tsx:223:45
    221|     )
    222| 
    223|     expect(screen.getByTestId('container')).toHaveTextContent('Has con‚Ä¶
       |                                             ^
    224|   })
    225| })

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/7]‚éØ

 FAIL  |omni-task| lib/store/__tests__/toast-store.test.ts > useToastStore > removeToast > devrait supprimer un toast sp√©cifique
AssertionError: expected [] to have a length of 2 but got +0

[32m- Expected[39m
[31m+ Received[39m

[32m- 2[39m
[31m+ 0[39m

 ‚ùØ lib/store/__tests__/toast-store.test.ts:109:37
    107|       })
    108| 
    109|       expect(result.current.toasts).toHaveLength(2)
       |                                     ^
    110|       expect(result.current.toasts.find(t => t.id === toastToRemove.id‚Ä¶
    111|       expect(result.current.toasts[0].message).toBe('Toast 1')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/7]‚éØ

 FAIL  |omni-task| lib/store/__tests__/toast-store.test.ts > useToastStore > Gestion de plusieurs toasts > devrait supprimer les toasts dans le bon ordre
AssertionError: expected [] to have a length of 2 but got +0

[32m- Expected[39m
[31m+ Received[39m

[32m- 2[39m
[31m+ 0[39m

 ‚ùØ lib/store/__tests__/toast-store.test.ts:282:37
    280|         vi.advanceTimersByTime(3000)
    281|       })
    282|       expect(result.current.toasts).toHaveLength(2)
       |                                     ^
    283|       expect(result.current.toasts.find(t => t.type === 'success')).to‚Ä¶
    284| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/7]‚éØ

 FAIL  |omni-task| app/api/tasks/__tests__/route.test.ts > Tasks API - Simplified > GET /api/tasks > devrait retourner les t√¢ches de l'utilisateur
AssertionError: expected { data: [ { id: '1', ‚Ä¶(2) }, ‚Ä¶(1) ] } to deeply equal [ ‚Ä¶(2) ]

[32m- Expected:[39m 
[
  {
    "id": "1",
    "title": "Task 1",
    "user_id": "user123",
  },
  {
    "id": "2",
    "title": "Task 2",
    "user_id": "user123",
  },
]

[31m+ Received:[39m 
{
  "data": [
    {
      "id": "1",
      "title": "Task 1",
      "user_id": "user123",
    },
    {
      "id": "2",
      "title": "Task 2",
      "user_id": "user123",
    },
  ],
}

 ‚ùØ app/api/tasks/__tests__/route.test.ts:90:20
     88| 
     89|       expect(response.status).toBe(200)
     90|       expect(data).toEqual(mockTasks)
       |                    ^
     91|       expect(mockSupabase.from).toHaveBeenCalledWith('tasks')
     92|       expect(mockSupabase.eq).toHaveBeenCalledWith('user_id', 'user123‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/7]‚éØ

 FAIL  |omni-task| app/api/tasks/__tests__/route.test.ts > Tasks API - Simplified > POST /api/tasks > devrait cr√©er une nouvelle t√¢che
AssertionError: expected { data: { title: 'New Task', ‚Ä¶(4) } } to match object { title: 'New Task', ‚Ä¶(2) }
(6 matching properties omitted from actual)

[32m- Expected[39m
[31m+ Received[39m

[2m  {[22m
[31m+   "data": {[39m
[31m+     "id": "task123",[39m
[2m      "priority": "HIGH",[22m
[2m      "status": "TODO",[22m
[2m      "title": "New Task",[22m
[31m+     "user_id": "user123",[39m
[31m+   },[39m
[2m  }[22m

 ‚ùØ app/api/tasks/__tests__/route.test.ts:131:20
    129| 
    130|       expect(response.status).toBe(201)
    131|       expect(data).toMatchObject(newTask)
       |                    ^
    132|     })
    133| 

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/7]‚éØ

 FAIL  |omni-task| app/api/tasks/__tests__/route.test.ts > Tasks API - Simplified > PATCH /api/tasks > devrait retourner 401 si non authentifi√©
TypeError: Cannot destructure property 'params' of 'undefined' as it is undefined.
 ‚ùØ Module.PATCH app/api/tasks/route.ts:132:5
    130| export async function PATCH(
    131|   request: NextRequest,
    132|   { params }: { params: { id: string } }
       |     ^
    133| ) {
    134|   try {
 ‚ùØ app/api/tasks/__tests__/route.test.ts:162:30

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/7]‚éØ

 FAIL  |omni-task| app/api/tasks/__tests__/route.test.ts > Tasks API - Simplified > DELETE /api/tasks > devrait retourner 401 si non authentifi√©
TypeError: Cannot destructure property 'params' of 'undefined' as it is undefined.
 ‚ùØ Module.DELETE app/api/tasks/route.ts:208:5
    206| export async function DELETE(
    207|   request: NextRequest,
    208|   { params }: { params: { id: string } }
       |     ^
    209| ) {
    210|   try {
 ‚ùØ app/api/tasks/__tests__/route.test.ts:175:30

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/7]‚éØ


 Test Files  3 failed | 9 passed (12)
      Tests  7 failed | 125 passed | 2 skipped (134)
   Start at  20:57:03
   Duration  12.52s (transform 757ms, setup 533ms, collect 2.58s, tests 6.54s, environment 906ms, prepare 176ms)

